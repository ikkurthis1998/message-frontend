{"version":3,"sources":["components/UnAuthHome.tsx","utils/socketIo.ts","components/ChatBox.tsx","components/AuthHome.tsx","components/GuestWelcome.tsx","App.tsx","index.tsx"],"names":["UnAuthHome","useAuth0","loginWithRedirect","isLoading","history","useHistory","webAuth","WebAuth","domain","process","clientID","redirectUri","responseType","guestLogin","a","login","email","password","realm","error","result","console","log","push","className","alt","src","onClick","socket","io","ChatBox","useState","message","setMessage","chat","setChat","loading","setLoading","myRef","useRef","user","useEffect","fetch","response","json","publicChats","getPublicChats","then","on","payload","ref","current","scrollIntoView","scrollToRef","map","index","sub","name","Date","timeStamp","toLocaleString","hour","minute","onSubmit","e","preventDefault","emit","toISOString","sendMessage","required","type","value","onChange","target","AuthHome","logout","returnTo","GuestWelcome","enable","setEnable","window","location","search","disabled","App","isAuthenticated","exact","path","dotenv","ReactDOM","render","clientId","document","getElementById"],"mappings":"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","file":"static/js/main.3f252927.chunk.js","sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { WebAuth } from 'auth0-js';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst UnAuthHome = () => {\r\n\r\n    const { loginWithRedirect, isLoading } = useAuth0();\r\n\r\n    const history = useHistory();\r\n\r\n    const webAuth = new WebAuth({\r\n                          domain: process.env.REACT_APP_AUTH_DOMAIN as string,\r\n                          clientID: process.env.REACT_APP_CLIENT_ID as string,\r\n                          redirectUri: `https://message-frontend.web.app/guestLogin`,\r\n                          responseType: 'code'\r\n                      })\r\n\r\n    const guestLogin = async () => {\r\n        await webAuth.login({\r\n        email: \"test@test.com\",\r\n        password: \"test123T@\",\r\n        realm: \"Username-Password-Authentication\"\r\n        }, (error: any, result: any) => {\r\n        if (error) {\r\n            console.error(error);\r\n        }\r\n        console.log(result);\r\n        });\r\n        history.push('/guestLogin');\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white flex flex-col justify-center items-center mobile-sm:w-4/6 tablet:w-96 h-96 rounded-lg\">\r\n            <img\r\n                className=\"w-20\"\r\n                alt=\"message\"\r\n                src=\"https://firebasestorage.googleapis.com/v0/b/roc8-careers.appspot.com/o/18-Message%20(No%20Padding).png?alt=media&token=17bc37fd-03fa-48ba-9e68-1949220cd671\"\r\n            />\r\n            <h1 className=\"text-5xl mb-5 font-bold font-rajdhani\">message</h1>\r\n            {isLoading && <>\r\n                    <p className=\"mb-5\">Hold up a minute there...</p>\r\n                    <div className=\" flex justify-center items-center\">\r\n                        <div className=\"animate-spin rounded-full h-28 w-28 border-b-2 border-gray-900\"></div>\r\n                    </div>\r\n                </>\r\n            }\r\n            {!isLoading && <>\r\n                <button className=\"mobile-sm:w-28 h-10 mobile-sm:text-base text-white font-bold bg-blue hover:bg-blue-600 rounded-lg mb-5\" onClick={() => loginWithRedirect()}>Lets Go!</button>\r\n                <button className=\"mobile-sm:w-28 h-10 mobile-sm:text-base text-white font-bold bg-blue hover:bg-blue-600 rounded-lg mb-5\" onClick={async () => await guestLogin()}>Guest login*</button>\r\n                <p className=\"text-red-500\">*If you are opting for guest login,<br/> please make sure cookies are allowed.</p>\r\n            </>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UnAuthHome;","import io from \"socket.io-client\";\r\n\r\nconst socket = io('http://localhost:3000');\r\n\r\nexport default socket;","import { FormEvent, RefObject, useEffect, useRef, useState } from \"react\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport socket from \"../utils/socketIo\";\r\n\r\nconst ChatBox = () => {\r\n\r\n    const [message, setMessage] = useState('');\r\n    const [chat, setChat] = useState([] as any[]);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const myRef = useRef<HTMLDivElement>(null);\r\n\r\n    const { user } = useAuth0();\r\n\r\n    const sendMessage = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (message) {\r\n            socket.emit(\"public\", { message, name: user?.name, sub: user?.sub, timeStamp: new Date().toISOString() });\r\n        }\r\n        setMessage(\"\");\r\n    }\r\n\r\n    const scrollToRef = (ref: RefObject<HTMLDivElement>) => {\r\n        ref.current?.scrollIntoView();\r\n    };\r\n\r\n    useEffect(() => {\r\n        const getPublicChats = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // await dbConnect();\r\n                const response = await fetch(process.env.REACT_APP_BACKEND_URL as string);\r\n                const publicChats = await response.json();\r\n                // console.log(response);\r\n                setChat(publicChats);\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n\r\n        getPublicChats().then(() => {\r\n            console.log(\"Yes\");\r\n            setLoading(false);\r\n        });\r\n        \r\n    }, []);\r\n\r\n    socket.on(\"public\", (payload) => {\r\n            // console.log(\"hello\");\r\n            setChat([...chat, payload]);\r\n            scrollToRef(myRef);\r\n        });\r\n\r\n    return (\r\n        <div className=\"w-96 h-5/6 border flex flex-col justify-end bg-gray-200 rounded m-5\">\r\n            <div className=\"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-100 scrollbar-track-gray-200 flex flex-col p-2\">\r\n                {chat.map((payload, index) => {\r\n                    let shortOptions: Intl.DateTimeFormatOptions = { hour: \"2-digit\", minute: \"2-digit\" };\r\n                    // let longOptions: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: \"2-digit\", minute: \"2-digit\" };\r\n                    return (\r\n                        <div key={index} className={ user?.sub === payload.sub ? \"flex flex-col self-end border bg-blue-300 min-w-md max-w-2/3 py-1 px-3 m-1 rounded\" : \"flex flex-col self-start border bg-white min-w-md max-w-2/3 py-1 px-3 m-1 rounded\" }>\r\n                            <p className={user?.sub === payload.sub ? \"text-sm self-end font-bold hidden\" : \"text-sm self-start font-bold text-blue\"}>{payload.name}</p>\r\n                            <p className={user?.sub === payload.sub ? \"self-end text-lg\" : \"self-start text-lg\"}>{payload.message}</p>\r\n                            <p className={user?.sub === payload.sub ? \"self-end text-sm\" : \"self-end text-sm\" }>{ new Date(payload.timeStamp).toLocaleString(\"en-US\", shortOptions) }</p>\r\n                        </div>\r\n                    )\r\n                })}\r\n                <div ref={myRef}>{ loading ? \"Loading...\" : \"\" }</div>\r\n            </div>\r\n            <form onSubmit={(e) => sendMessage(e)} className=\"mb-1 flex mx-2\">\r\n                <input required className=\"flex-grow px-2 focus:outline-none focus:border-transparent rounded\" type=\"text\" value={message} onChange={(e) => {\r\n                    setMessage(e.target.value);\r\n                }} />\r\n                <button type=\"submit\" className=\"w-14 border bg-green-300 border border-green-300 rounded\" >Send</button>\r\n            </form>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ChatBox;","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport ChatBox from \"./ChatBox\";\r\n\r\n\r\nconst AuthHome = () => {\r\n\r\n    const { logout, user } = useAuth0();\r\n\r\n    // const [nameProcess, setNameProcess] = useState(false);\r\n    // const [userName, setuserName] = useState(\"\");\r\n\r\n    // const setName = () => {\r\n    //     setNameProcess(true);\r\n    // }\r\n\r\n    // const saveName = () => {\r\n        \r\n    //     setNameProcess(false);\r\n    // }\r\n\r\n    if (user) {\r\n        return (\r\n            <div className=\"flex flex-col justify-start items-center w-screen h-screen rounded-lg py-10 box-border bg-blue\">\r\n                {/* {nameProcess ? <input type=\"text\" defaultValue={user.name} onChange={(e) => setuserName(e.target.value)} /> : <p>{user.name}</p>}\r\n                {nameProcess ? <button onClick={() => saveName()}>Save</button> : <button onClick={() => setName()}>update name</button>} */}\r\n                <p className=\"font-bold text-2xl\">{user.name}</p>\r\n                <button onClick={() => logout({ returnTo: \"https://message-frontend.web.app\" })}>Log Out</button>\r\n                {/* <div className=\"bg-white flex flex-col justify-start items-center mobile-sm:w-full tablet:w-3/12 rounded-lg\">\r\n                    <div>\r\n                        <img src={user.picture} alt={user.name} />\r\n                        <h2>{user.nickname}</h2>\r\n                        <p>{user.email}</p>\r\n                        <button onClick={() => logout({ returnTo: \"http://localhost:3001\" })}>Log Out</button>\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                        <div>\r\n                            <img\r\n                                alt=\"pg\"\r\n                                src='https://firebasestorage.googleapis.com/v0/b/roc8-careers.appspot.com/o/07-Leadership.png?alt=media&token=aaf3da73-f680-47b6-b5da-11894f6a27d9'\r\n                            />\r\n                            <h1 className=\"text-5xl cursor-pointer\">Public</h1>\r\n                        </div>\r\n                    </div>\r\n                </div> */}\r\n                {/* <div className=\"bg-white tablet:flex flex-col justify-start rounded-lg tablet:w-8/12 mobile-sm:hidden\">\r\n                    <input type=\"text\" />\r\n                    <button>send</button>\r\n                </div> */}\r\n                <ChatBox />\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    return null\r\n\r\n}\r\n\r\nexport default AuthHome;","import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst GuestWelcome = () => {\r\n    const { loginWithRedirect } = useAuth0();\r\n    const [enable, setEnable] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (window.location.search) {\r\n            console.log(\"Yes\");\r\n            setEnable(true);\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"bg-blue flex justify-center items-center box-border w-screen h-screen p-5\">\r\n            <div className=\"bg-white flex flex-col justify-center items-center mobile-sm:w-4/6 tablet:w-96 h-96 rounded-lg p-14\">\r\n                <h1 className=\"text-5xl font-bold mb-5\">Welcome!</h1>\r\n                <p className=\"text-lg mb-5\">This guest account is to try out different features of the app</p>\r\n                <p className=\"text-lg mb-5\">Be friendly, kind, welcoming and respectful.</p>\r\n                <button onClick={() => loginWithRedirect()} className={ `text-xl rounded-lg w-24 h-10 text-white ${enable ? \"bg-blue hover:bg-blue-600 \" : \"bg-blue-400 cursor-wait\"}` } disabled={enable ? false : true}>Lets Go</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GuestWelcome;","import './App.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport UnAuthHome from './components/UnAuthHome';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport AuthHome from './components/AuthHome';\nimport GuestWelcome from './components/GuestWelcome';\n\n\nfunction App() {\n  const { isAuthenticated } = useAuth0();\n\n  return (\n    <Router>\n      <div className=\"App\">\n        \n        <Route exact path=\"/\">\n          <header className=\"bg-blue flex justify-center items-center box-border w-screen h-screen px-10\">\n            {(!isAuthenticated) && <UnAuthHome />}\n            {isAuthenticated && <AuthHome />}\n          </header>\n        </Route>\n\n        <Route path=\"/guestLogin\">\n          <GuestWelcome />\n        </Route>\n\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Auth0Provider } from \"@auth0/auth0-react\";\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconsole.log(process.env.REACT_APP_AUTH_DOMAIN)\nReactDOM.render(\n  <Auth0Provider\n    domain={process.env.REACT_APP_AUTH_DOMAIN as string}\n    clientId = {process.env.REACT_APP_CLIENT_ID as string}\n    redirectUri = 'https://message-frontend.web.app'\n  >\n      <App />\n    \n  </Auth0Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}